<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="../../media/images/favicon.ico" />

        <title>Request and Input | Windwalker - A Modern PHP Framework</title>

        <!-- Uikit core CSS -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/rainbow.min.css"/>

        <!-- Custom styles for this template -->
        <link href="../../media/css/main.css" rel="stylesheet">

        <meta name="description" content="">
        <meta name="generator" content="The Time Machine">

        <meta property="og:title" content="Request and Input | Windwalker - A Modern PHP Framework">
        <meta property="og:site_name" content="Windwalker Framework">

        
        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="../../media/js/jquery.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
        <script>
            $(document).ready(function() {

                $('.article-content pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            });
        </script>

            <script src="../../media/js/doc.js"></script>
    </head>
    <body class="">
    <nav id="header" class="uk-navbar uk-navbar-attached">
        <div class="uk-container uk-container-center">

            <a id="big-logo" class="uk-navbar-brand uk-hidden-small" href="../../">
                <img class="uk-margin uk-margin-remove" src="../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <a href="#" class="uk-navbar-toggle uk-visible-small" data-uk-toggle="{target:'#mainmenu', cls: 'uk-hidden-small'}"></a>

            <a id="small-logo" class="uk-navbar-brand uk-navbar-center uk-visible-small" href="../../">
                <img class="uk-margin uk-margin-remove" style="max-width: 95%;" src="../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <ul id="mainmenu" class="uk-navbar-nav uk-float-right uk-hidden-small">
                <li class="">
                    <a href="../../about/">
                        <span class="menu-item-title">About</span>
                    </a>
                </li>

                <li class="uk-active">
                    <a href="../../documentation/start/getting-started.html">
                        <span class="menu-item-title">Documentation</span>
                    </a>
                </li>

                <li class="">
                    <a href="https://github.com/ventoviro/windwalker" target="_blank">
                        <span class="menu-item-title">GitHub</span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>

    <section id="banner">
        <div class="banner-inner">
                <div class="uk-container uk-container-center banner-inner-title">
        <h1>Request and Input</h1>
    </div>
        </div>
    </section>

    <div id="main-body">
            <div class="uk-container uk-container-center">
        <div class="uk-grid">
                <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="uk-nav uk-nav-side side-menu side-bar" data-uk-nav="">
        <li class="uk-nav-header">Start</li>

                    <li class="">
                <a href="../../documentation/start/getting-started.html">Getting Started</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/routing-controller.html">Routing And Controller</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/package-system.html">Package System (Bundle)</a>
            </li>
                    <li class="uk-active">
                <a href="../../documentation/start/request-input.html">Request and Input</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/ioc-container.html">IoC Container</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/service-provider.html">Service Provider</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">MVC</li>

                    <li class="">
                <a href="../../documentation/mvc/use-controller.html">Use Controller</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/view-templating.html">View and Templating</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/model-database.html">Model and Database</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/view-model.html">ViewModel</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/uri-route-building.html">URI and Route Building</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Database</li>

                    <li class="">
                <a href="../../documentation/db/basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/read-write.html">Read and Write</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/table-schema.html">Table and Schema</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/query-builder.html">Query Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/datamapper.html">DataMapper</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/migration.html">Migration And Seeding</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Console</li>

                    <li class="">
                <a href="../../documentation/console/console-basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../documentation/console/custom-commands.html">Custom Commands</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">More</li>

                    <li class="">
                <a href="../../documentation/more/authentication.html">Authentication</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/caching.html">Caching</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/events.html">Events</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/data-object.html">Data Object</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/widget-renderer.html">Widget and Renderer</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/form-builder.html">Form Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/html-builder.html">HTML Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/languages.html">Languages</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/pagination.html">Pagination</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/session.html">Session</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/tests.html">Tests</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/validation.html">Validation</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/error-handling.html">Error Handling</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/more-packages.html">More Packages</a>
            </li>
        
    <li class="uk-nav-divider"></li>
   </ul>    </div>

            <div class="uk-width-medium-3-4 uk-container-center">
                <article class="article-content">
                    <h1>Get Input Object in Controller</h1>

<p>Last section we have learned how to make controller work, now it's time to see how the application receives HTTP request queries and respond. In Windwalker you may access input queries using <code>Input</code> object. Below is how it works:</p>

<pre><code class="php">// src/Flower/Controller/Sakuras/GetController.php

class GetController extends Controller
{
    protected function doExecute()
    {
        $id = $this-&gt;input-&gt;get('id');
        $token = $this-&gt;input-&gt;get('token', 'default value');

        // Do some stuff
    }
}
</code></pre>

<h2>Get Input at Anywhere</h2>

<p>The <code>Input</code> property only exists in class <code>Application</code> and <code>Controller</code>. Under any other situation to access <code>Input</code>, you may use Ioc (DI) Container. This is NOT recommended for it might break software robustness of your application.</p>

<pre><code class="php">// Use global Ioc class
$input = Ioc::getInput();

// OR use container object
$input = $container-&gt;get('system.input');
</code></pre>

<h1>How Input Work</h1>

<p>Mostly, we need to get data from http request which <code>$_GET</code>, <code>$_POST</code> or <code>$_REQUEST</code> provides.</p>

<p>But it is very unsafe if we only use super global variables, the Input object can help us get values from these variables and sanitize string.</p>

<pre><code class="php">$input-&gt;get('flower'); // Same as $_REQUEST['flower']

$input-&gt;set('flower', 'sakura');
</code></pre>

<p>The second argument is default value if request params does not exist.</p>

<pre><code class="php">$input-&gt;get('flower', 'default');
</code></pre>

<h2>Filter</h2>

<p>Input use <a href="https://github.com/ventoviro/windwalker-filter">Windwalker Filter</a> package to sanitize request string, the default filter type is <code>CMD</code>.
We can use other filter type:</p>

<pre><code class="php">// mysite.com/?flower=&lt;p&gt;to be, or not to be.&lt;/p&gt;;

$input-&gt;get('flower'); // tobeornottobe (Default cmd filter)

$input-&gt;get('flower', 'default_value', InputFilter::STRING); // to be, or not to be

$input-&gt;get('flower', 'default_value', 'string'); // Same as above

$input-&gt;getString('flower'); // to be, or not to be (Same as above, using magic method)

$input-&gt;getRaw('flower') // &lt;p&gt;to be, or not to be.&lt;/p&gt;
</code></pre>

<p>More filter usage please see: <a href="https://github.com/ventoviro/windwalker-filter">Windwalker Filter</a></p>

<h2>Get Array</h2>

<p>Input provides option to get data as array.</p>

<pre><code class="php">// mysite.com/?flower[1]=sakura&amp;flower[2]=olive;

$input-&gt;get('flower', InputFilter::ARRAY); // Array( [1] =&gt; sakura [2] =&gt; olive)
</code></pre>

<p>Use <code>getArray()</code> method</p>

<pre><code class="php">// mysite.com/?flower=sakura&amp;foo=bar&amp;king=Richard

// Get all request
$input-&gt;getArray();

// To retrieve values you want
$array(
    'flower' =&gt; '',
    'king' =&gt; '',
);

$input-&gt;getArray($array); // Array( [flower] =&gt; sakura [king] =&gt; Richard)

// Specify different filters for each of the inputs:
$array(
    'flower' =&gt; InputFilter::CMD,
    'king' =&gt; InputFilter::STRING,
);

// Use nested array to get more complicated hierarchies of values

$input-&gt;getArray(array(
    'windwalker' =&gt; array(
        'title' =&gt; InputFilter::STRING,
        'quantity' =&gt; InputFilter::INTEGER,
        'state' =&gt; 'integer' // Same as above
    )
));
</code></pre>

<h2>Get And Set Multi-Level</h2>

<p>If we want to get value of <code>foo[bar][baz]</code>, just use <code>setByPath()</code>:</p>

<pre><code class="php">$value = $input-&gt;getByPath('foo.bar.baz', 'default', InputFilter::STRING);

$input-&gt;setByPath('foo.bar.baz', $data);
</code></pre>

<h2>Get Value From RESTful methods</h2>

<p>We can get other methods as a new input object.</p>

<pre><code class="php">$post = $input-&gt;post;

$value = $post-&gt;get('foo', 'bar');

// Other inputs
$get    = $input-&gt;get;
$put    = $input-&gt;put;
$delete = $input-&gt;delete;
</code></pre>

<h1>Get SUPER GLOBALS</h1>

<p>Every Super Global will be an independent object.</p>

<pre><code class="php">// These are all Input object
$env     = $input-&gt;env;
$session = $input-&gt;session;
$cookie  = $input-&gt;cookie;
$server  = $input-&gt;server;

$server-&gt;get('REMOTE_ADDR'); // Same as $_SERVER['REMOTE_ADDR'];
$env-&gt;set('FOO_BAR', 1);
</code></pre>

<p>See: <a href="http://php.net/manual/en/language.variables.superglobals.php">SUPER GLOBALS</a></p>

<h2>Get method according to current request type:</h2>

<pre><code class="php">$method = $input-&gt;getMethod();
</code></pre>

<h1>Files Input</h1>

<p>The format that PHP returns file data in for arrays can at times be awkward, especially when dealing with arrays of files. 
Files Input provides a convenient interface for making life a little easier, grouping the data by file.</p>

<p>Suppose you have a form like:</p>

<pre><code class="html">&lt;form action="..." enctype="multipart/form-data" method="post"&gt;
    &lt;input type="file" name="flower[test][]" /&gt;
    &lt;input type="file" name="flower[test][]" /&gt;
    &lt;input type="submit" value="submit" /&gt;
&lt;/form&gt;
</code></pre>

<p>Normally, PHP put these in array <code>$_FILES</code> looks like:</p>

<pre><code>Array
(
    [flower] =&gt; Array
        (
            [name] =&gt; Array
                (
                    [test] =&gt; Array
                        (
                            [0] =&gt; flower.png
                            [1] =&gt; sakura.jpg
                        )

                )

            [type] =&gt; Array
                (
                    [test] =&gt; Array
                        (
                            [0] =&gt; image/png
                            [1] =&gt; image/jpeg
                        )

                )

            [tmp_name] =&gt; Array
                (
                    [test] =&gt; Array
                        (
                            [0] =&gt; /tmp/phpUF9Hj
                            [1] =&gt; /tmp/phpO4Fug
                        )

                )

            [error] =&gt; Array
                (
                    [test] =&gt; Array
                        (
                            [0] =&gt; 0
                            [1] =&gt; 0
                        )

                )

            [size] =&gt; Array
                (
                    [test] =&gt; Array
                        (
                            [0] =&gt; 90445
                            [1] =&gt; 31187
                        )

                )

        )

)
</code></pre>

<p>FilesInput rearrange the result with cleaner form to work with:</p>

<pre><code class="php">$files = $input-&gt;files-&gt;get('flower');
</code></pre>

<p><code>$files</code> then becomes:</p>

<pre><code>Array
(
    [test] =&gt; Array
        (
            [0] =&gt; Array
                (
                    [name] =&gt; youtube_icon.png
                    [type] =&gt; image/png
                    [tmp_name] =&gt; /tmp/phpXoIpSD
                    [error] =&gt; 0
                    [size] =&gt; 34409
                )

            [1] =&gt; Array
                (
                    [name] =&gt; Younger_Son_2.jpg
                    [type] =&gt; image/jpeg
                    [tmp_name] =&gt; /tmp/phpWDE7ye
                    [error] =&gt; 0
                    [size] =&gt; 99529
                )

        )
)
</code></pre>

<p>Windwalker Input object is profoundly influenced by <a href="https://github.com/joomla-framework/input">Joomla Input</a></p>

<p>More about Input, see <a href="https://github.com/ventoviro/windwalker-io">Windwalker IO Package</a></p>

                        <hr />

    <p class="uk-text-center">
        Found a typo? Help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/start/request-input.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </div>
    </div>

    <footer id="footer">
        <div class="uk-container uk-container-center uk-text-center">

            <div class="footer-logo">
                <a href="#" data-uk-smooth-scroll>
                    <img src="../../media/images/logo/windwalker-logo.png" width="150" alt="Footer LOGO">
                </a>
            </div>

            <p class="uk-text-center social-buttons">
                <a target="_blank" class="uk-icon-button uk-icon-facebook" href="javascript: void(0);"></a>

                <a target="_blank" class="uk-icon-button uk-icon-github" href="https://github.com/ventoviro/windwalker"></a>

                <a class="uk-icon-button uk-icon-envelope-o" href="mailto:asika32764@gmail.com"></a>
            </p>

            <p>
                Copyright &copy; 2016 Windwalker. All Rights Reserved.
            </p>
            <p class="back">
                <a href="#" data-uk-smooth-scroll><span class="uk-icon-chevron-up"></span> Back to Top</a>
            </p>
        </div>
    </footer>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48372917-6', 'auto');
        ga('send', 'pageview');

    </script>

    </body>
</html>
