<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="../../media/images/favicon.ico" />

        <title>View Model | Windwalker - A Modern PHP Framework</title>

        <!-- Uikit core CSS -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/rainbow.min.css"/>

        <!-- Custom styles for this template -->
        <link href="../../media/css/main.css" rel="stylesheet">

        <meta name="description" content="">
        <meta name="generator" content="The Time Machine">

        <meta property="og:title" content="View Model | Windwalker - A Modern PHP Framework">
        <meta property="og:site_name" content="Windwalker Framework">

        
        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="../../media/js/jquery.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
        <script src="../../media/js/highlight/highlight.yaml.js"></script>
        <script>
            $(document).ready(function() {

                $('.article-content pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            });
        </script>

            <script src="../../media/js/doc.js"></script>
    </head>
    <body class="">
    <nav id="header" class="uk-navbar uk-navbar-attached">
        <div class="uk-container uk-container-center">

            <a id="big-logo" class="uk-navbar-brand uk-hidden-small" href="../../">
                <img class="uk-margin uk-margin-remove" src="../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <a href="#" class="uk-navbar-toggle uk-visible-small" data-uk-toggle="{target:'#mainmenu', cls: 'uk-hidden-small'}"></a>

            <a id="small-logo" class="uk-navbar-brand uk-navbar-center uk-visible-small" href="../../">
                <img class="uk-margin uk-margin-remove" style="max-width: 95%;" src="../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <ul id="mainmenu" class="uk-navbar-nav uk-float-right uk-hidden-small">
                <li class="">
                    <a href="../../about/">
                        <span class="menu-item-title">About</span>
                    </a>
                </li>

                <li class="uk-active">
                    <a href="../../documentation/start/getting-started.html">
                        <span class="menu-item-title">Documentation</span>
                    </a>
                </li>

                <li class="">
                    <a href="https://github.com/ventoviro/windwalker" target="_blank">
                        <span class="menu-item-title">GitHub</span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>

    <section id="banner">
        <div class="banner-inner">
                <div class="uk-container uk-container-center banner-inner-title">
        <h1>View Model</h1>
    </div>
        </div>
    </section>

    <div id="main-body">
            <div class="uk-container uk-container-center">
        <div class="uk-grid">
                <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="uk-nav uk-nav-side side-menu side-bar" data-uk-nav="">
        <li class="uk-nav-header">Start</li>

                    <li class="">
                <a href="../../documentation/start/getting-started.html">Getting Started</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/routing-controller.html">Routing And Controller</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/package-system.html">Package System (Bundle)</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/config.html">Config &amp; Setting</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/request-input.html">Request and Input</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/ioc-container.html">IoC Container</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/service-provider.html">Service Provider</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">MVC</li>

                    <li class="">
                <a href="../../documentation/mvc/use-controller.html">Use Controller</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/class-resolvers.html">Class Resolvers</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/view-templating.html">View and Templating</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/model-database.html">Model and Database</a>
            </li>
                    <li class="uk-active">
                <a href="../../documentation/mvc/view-model.html">ViewModel</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/uri-route-building.html">URI and Route Building</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Database</li>

                    <li class="">
                <a href="../../documentation/db/basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/read-write.html">Read and Write</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/table-schema.html">Table and Schema</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/query-builder.html">Query Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/active-record.html">ActiveRecord</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/datamapper.html">DataMapper</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/migration.html">Migration And Seeding</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Console</li>

                    <li class="">
                <a href="../../documentation/console/console-basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../documentation/console/custom-commands.html">Custom Commands</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">More</li>

                    <li class="">
                <a href="../../documentation/more/authentication.html">Authentication</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/caching.html">Caching</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/events.html">Events</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/data-object.html">Data Object</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/registry.html">Registry Object</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/widget-renderer.html">Widget and Renderer</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/form-builder.html">Form Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/html-builder.html">HTML Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/languages.html">Languages</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/pagination.html">Pagination</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/session.html">Session</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/datetime.html">DateTime</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/tests.html">Tests</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/validation.html">Validation</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/error-handling.html">Error Handling</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/more-packages.html">More Packages</a>
            </li>
        
    <li class="uk-nav-divider"></li>
   </ul>    </div>

            <div class="uk-width-medium-3-4 uk-container-center">
                <article class="article-content">
                    <h1>About MVC Interactions</h1>

<p>In most MVC practices, there is no direct communication between View and Model. We called it <strong>Passive View</strong>. But there are many 
variants of MVC like: MVVM, MVP etc.</p>

<p>Windwalker uses a pattern which is similar to <a href="http://goo.gl/p6Rjwl">Supervising Controller</a>, <a href="http://goo.gl/LJPG">MVVM</a> or <a href="http://goo.gl/y3VzE">MVP</a>
, View can not communicate to Model, but Controller can binding Model to View, then View is able to get data from Model.</p>

<p>The benefit of this pattern is that View can decide which data they are needed and call Model to get these data.
 And controller's responsibility is just decide binding which models to view. There is a <code>ViewModel</code> between View and Model 
 to handle request from View and get data from Model.</p>

<h2>Schematic Diagram</h2>

<p><img src="https://cloud.githubusercontent.com/assets/1639206/5587060/82d753f6-911b-11e4-85b8-3ccd08599c95.jpg" alt="mvc" /> <img src="https://cloud.githubusercontent.com/assets/1639206/5591914/9ddd2b42-91d6-11e4-9a6a-81fb427f4a54.jpg" alt="ww-mvc" /></p>

<h2>ViewModel</h2>

<p>View is not directly communicate to Model, there is a <code>ViewModel</code> object between them. You can consider ViewModel 
as a Model manager.</p>

<p><img src="https://cloud.githubusercontent.com/assets/1639206/5587061/82da36ac-911b-11e4-9da8-772dcd40e9b6.jpg" alt="view-model" /></p>

<h1>Use ViewModel Pattern in Windwalker</h1>

<p>This is a traditional MVC usage in controller:</p>

<pre><code class="php">&lt;?php
// doExecute()

$model = new FlowerModel;
$view = new SakurasHtmlView;

$item = $model-&gt;getItem();

$view['created'] = $item;

return $view-&gt;render();
</code></pre>

<p>Change some code, we can push Model into View:</p>

<pre><code class="php">// doExecute()

$model = new FlowerModel;
$view = new SakurasHtmlView;

$view-&gt;setModel($model);

// OR
$view-&gt;model-&gt;setModel($model);

return $view-&gt;render();
</code></pre>

<p>Get data in View:</p>

<pre><code class="php">class SakurasHtmlView extends HtmlView
{
    protected function prepareData($data)
    {
        $data-&gt;item = $this-&gt;model-&gt;getItem();
    }
}
</code></pre>

<p>The <code>$view-&gt;model</code> property is <code>ViewModel</code> object, if we call any method, <code>ViewModel</code> will pass this method to default Model by magic method.
If Model does not have this method, it will only return <code>null</code>.</p>

<p>You must make sure Model named with <code>XXXModel</code>, the model will guess their name. you can also set name property when declaring Model class. 
There is some ways to define Model's name:</p>

<pre><code class="php">// Set by config
$model-&gt;config-&gt;set('name', 'foo');

// Use class name
class FooModel extends Model {}

// Use property
class SomeModel extends Model
{
    protected $name = 'foo';
}
</code></pre>

<h2>Set Multiple Models</h2>

<p>We can get many models and push them into one view.</p>

<pre><code class="php">// In Controller::doExecute()

$model = $this-&gt;getModel();
$roseModel = $this-&gt;getModel('Rose');
$oliveModel = $this-&gt;getModel('Olive');

$view-&gt;setModel($model);
$view-&gt;setModel($roseModel);
$view-&gt;setModel($oliveModel);

return $view-&gt;render();
</code></pre>

<p>Use array access to get different models and call methods.</p>

<pre><code class="php">// In View::prepareData()

$data-&gt;items = $this-&gt;model-&gt;getItems();
$data-&gt;roses = $this-&gt;model['rose']-&gt;getRoses();
$data-&gt;olives = $this-&gt;model['olive']-&gt;getOlives();
</code></pre>

<p>If a model not set, and the method name start with <code>get*</code> or <code>load*</code>, it will return <code>null</code>.</p>

<pre><code class="php">$data-&gt;foo = $this-&gt;model['foo']-&gt;getFoo();
</code></pre>

                        <hr />

    <p class="uk-text-center">
        Found a typo? Help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/mvc/view-model.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </div>
    </div>

    <footer id="footer">
        <div class="uk-container uk-container-center uk-text-center">

            <div class="footer-logo">
                <a href="#" data-uk-smooth-scroll>
                    <img src="../../media/images/logo/windwalker-logo.png" width="150" alt="Footer LOGO">
                </a>
            </div>

            <p class="uk-text-center social-buttons">
                <a target="_blank" class="uk-icon-button uk-icon-facebook" href="javascript: void(0);"></a>

                <a target="_blank" class="uk-icon-button uk-icon-github" href="https://github.com/ventoviro/windwalker"></a>

                <a class="uk-icon-button uk-icon-envelope-o" href="mailto:asika32764@gmail.com"></a>
            </p>

            <p>
                Copyright &copy; 2016 Windwalker. All Rights Reserved.
            </p>
            <p class="back">
                <a href="#" data-uk-smooth-scroll><span class="uk-icon-chevron-up"></span> Back to Top</a>
            </p>
        </div>
    </footer>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48372917-6', 'auto');
        ga('send', 'pageview');

    </script>

    </body>
</html>
