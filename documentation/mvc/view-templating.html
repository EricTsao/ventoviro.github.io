<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="../../media/images/favicon.ico" />

        <title>View and Templating | Windwalker - A Modern PHP Framework</title>

        <!-- Uikit core CSS -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/rainbow.min.css"/>

        <!-- Custom styles for this template -->
        <link href="../../media/css/main.css" rel="stylesheet">

        <meta name="description" content="">
        <meta name="generator" content="The Time Machine">

        <meta property="og:title" content="View and Templating | Windwalker - A Modern PHP Framework">
        <meta property="og:site_name" content="Windwalker Framework">

        
        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="../../media/js/jquery.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
        <script>
            $(document).ready(function() {

                $('.article-content pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            });
        </script>

            <script src="../../media/js/doc.js"></script>
    </head>
    <body class="">
    <nav id="header" class="uk-navbar uk-navbar-attached">
        <div class="uk-container uk-container-center">

            <a id="big-logo" class="uk-navbar-brand uk-hidden-small" href="../../">
                <img class="uk-margin uk-margin-remove" src="../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <a href="#" class="uk-navbar-toggle uk-visible-small" data-uk-toggle="{target:'#mainmenu', cls: 'uk-hidden-small'}"></a>

            <a id="small-logo" class="uk-navbar-brand uk-navbar-center uk-visible-small" href="../../">
                <img class="uk-margin uk-margin-remove" style="max-width: 95%;" src="../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <ul id="mainmenu" class="uk-navbar-nav uk-float-right uk-hidden-small">
                <li class="">
                    <a href="../../about/">
                        <span class="menu-item-title">About</span>
                    </a>
                </li>

                <li class="uk-active">
                    <a href="../../documentation/start/getting-started.html">
                        <span class="menu-item-title">Documentation</span>
                    </a>
                </li>

                <li class="">
                    <a href="https://github.com/ventoviro/windwalker" target="_blank">
                        <span class="menu-item-title">GitHub</span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>

    <section id="banner">
        <div class="banner-inner">
                <div class="uk-container uk-container-center banner-inner-title">
        <h1>View and Templating</h1>
    </div>
        </div>
    </section>

    <div id="main-body">
            <div class="uk-container uk-container-center">
        <div class="uk-grid">
                <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="uk-nav uk-nav-side side-menu side-bar" data-uk-nav="">
        <li class="uk-nav-header">Start</li>

                    <li class="">
                <a href="../../documentation/start/getting-started.html">Getting Started</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/routing-controller.html">Routing And Controller</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/package-system.html">Package System (Bundle)</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/request-input.html">Request and Input</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/ioc-container.html">IoC Container</a>
            </li>
                    <li class="">
                <a href="../../documentation/start/service-provider.html">Service Provider</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">MVC</li>

                    <li class="">
                <a href="../../documentation/mvc/use-controller.html">Use Controller</a>
            </li>
                    <li class="uk-active">
                <a href="../../documentation/mvc/view-templating.html">View and Templating</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/model-database.html">Model and Database</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/view-model.html">ViewModel</a>
            </li>
                    <li class="">
                <a href="../../documentation/mvc/uri-route-building.html">URI and Route Building</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Database</li>

                    <li class="">
                <a href="../../documentation/db/basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/read-write.html">Read and Write</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/table-schema.html">Table and Schema</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/query-builder.html">Query Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/datamapper.html">DataMapper</a>
            </li>
                    <li class="">
                <a href="../../documentation/db/migration.html">Migration And Seeding</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Console</li>

                    <li class="">
                <a href="../../documentation/console/console-basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../documentation/console/custom-commands.html">Custom Commands</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">More</li>

                    <li class="">
                <a href="../../documentation/more/authentication.html">Authentication</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/caching.html">Caching</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/events.html">Events</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/data-object.html">Data Object</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/widget-renderer.html">Widget and Renderer</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/form-builder.html">Form Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/html-builder.html">HTML Builder</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/languages.html">Languages</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/pagination.html">Pagination</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/session.html">Session</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/tests.html">Tests</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/validation.html">Validation</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/error-handling.html">Error Handling</a>
            </li>
                    <li class="">
                <a href="../../documentation/more/more-packages.html">More Packages</a>
            </li>
        
    <li class="uk-nav-divider"></li>
   </ul>    </div>

            <div class="uk-width-medium-3-4 uk-container-center">
                <article class="article-content">
                    <h1>Use Default View Object</h1>

<p>In controller, you can do anything you want, but if you hope to render some template, the View object will help you. 
In this case, we create a default <code>HtmlView</code> to render template:</p>

<pre><code class="php">// /src/Flower/Controller/Sakuras/GetController.php

class GetController extends Controller
{
    protected function doExecute()
    {
        $view = new HtmlView;

        return $view-&gt;render();
    }
}
</code></pre>

<p>Then create a php file in <code>/templates/default.php</code>. This template will be rendered.</p>

<pre><code class="php">&lt;?php
// templates/default.php
?&gt;
Hello World
</code></pre>

<blockquote>
  <p>NOTE: Please check you use <code>\Windwalker\Core\View\HtmlView</code> not <code>\Windwalker\View\HtmlView</code>
   These 2 classes is similar but not the same.</p>
</blockquote>

<h2>Push Controller Information into View</h2>

<p>But this is not a good position to locate template, we will hope it at <code>templates/flower/sakuras</code>.
So add this code to push controller config into View, View will know every thing about Controller:</p>

<pre><code class="php">// /src/Flower/Controller/Sakuras/GetController.php

$view = new HtmlView;

// Push config into View
$view-&gt;setConfig($this-&gt;config);

return $view-&gt;render();
</code></pre>

<p>Move template file to <code>/templates/flower/sakuras/default.php</code>, and Windwalker will found it.</p>

<h2>Use Package Templates</h2>

<p>If your View is in a package, you can put your template at <code>{Package}/Templates/{view}</code>, For example, we move <code>default.php</code> 
to <code>/src/Flower/Templates/sakuras</code>, View will find this position priority than root templates folder. 
So we can make our templates following package folders.</p>

<h2>The Ordering of Template Paths</h2>

<p>Windwalker will follow this orders to find templates, you can override any template in a higher priority position:</p>

<pre><code>[0] =&gt; /src/[Package]/Templates/[view]
[1] =&gt; /templates/[package]/[view]
[2] =&gt; /templates
[3] =&gt; /vendor/windwalker/core/src/Core/Resources/Templates  &lt;-- Here is core templates
</code></pre>

<h2>Use other layouts</h2>

<p>The <code>foo.bar.baz</code> will matched <code>foo/bar/baz.php</code> file. If you didn't set any layout name, <code>default</code> will instead.</p>

<pre><code class="php">// Will find: edit.php
$view-&gt;setLayout('edit')-&gt;render();

// Will find: foo/bar/baz.php
$view-&gt;setLayout('foo.bar.baz')-&gt;render();
</code></pre>

<h2>Custom Template Paths</h2>

<p>Windwalker View use <code>SplPriorityQueue</code> to sort paths, if we want to add path, we should provide the priority flag.</p>

<pre><code class="php">use Windwalker\Utilities\Queue\Priority;

// ...

$view-&gt;addPath('/my/template/path1', Priority::HIGH);
$view-&gt;addPath('/my/template/path2', Priority::NORMAL);
</code></pre>

<h3>Add to Global</h3>

<p>Add paths to global that we don't need to set it every time, you must run this code before controller executed,
for example, you can run in <code>onAfterInitialise</code> event (See <a href="../more/event.html">Event</a>) , <code>YourPackage::initialise()</code> or <code>Application::initialise()</code>:</p>

<pre><code class="php">// Add global paths
\Windwalker\Core\Renderer\RendererHelper::addPath('/my/path', Priority::ABOVE_NORMAL);
</code></pre>

<p>See also: <a href="https://github.com/ventoviro/windwalker/tree/staging/src/View#htmlview">Windwalker View</a>
/ <a href="http://php.net/manual/en/class.splpriorityqueue.php">SplPriorityQueue</a></p>

<h2>Add Data</h2>

<p>View can maintain some data and use it in template:</p>

<pre><code class="php">// Set it when construct
$view = new HtmlView(array('foo' =&gt; 'bar'));

// Use setter
$view-&gt;set('foo', 'bar');

// Use Array Access
$view['foo'] = 'bar';
</code></pre>

<p>Then we can get this variable in template:</p>

<pre><code class="php">&lt;?php
// templates/flower/sakuras/default.php

$foo = $data-&gt;foo;
?&gt;
Hello &lt;?php echo $foo;?&gt;
</code></pre>

<h1>Create View Classes</h1>

<p>We are still using default View, but it is not so customizable. Let's extend it to a new View object:</p>

<pre><code class="php">&lt;?php
// src/Flower/View/SakurasHtmlView.php

namespace Flower\View;

use Windwalker\Core\View\HtmlView;

class SakurasHtmlView extends HtmlView
{
    protected function prepareData($data)
    {
        $data-&gt;created = $data-&gt;created-&gt;format('Y-m-d');
    }
}
</code></pre>

<p>Always remember add <code>Html</code> in view name, sometimes we will need <code>JsonView</code> or <code>XmlView</code>. Then we can create this view in controller:</p>

<pre><code class="php">&lt;?php
// /src/Flower/Controller/Sakuras/GetController.php

namespace Flower\Controller\Sakuras;

use Flower\View\SakurasHtmlView;
use Windwalker\Core\Controller\Controller;

class GetController extends Controller
{
    protected function doExecute()
    {
        $view = new SakurasHtmlView;

        // We don't need to push config now, if View located in package folder, 
        // it will guess all information which is needed. 

        $view['created'] = new \DateTime('now');

        return $view-&gt;render();
    }
}
</code></pre>

<p>The purpose of custom View object is that we can set data format in it, so controller dose not need to worry about 
how to show data, just consider how to send data into View and redirect pages.</p>

<h1>PHP Engine</h1>

<p>PHP engine use <a href="https://github.com/ventoviro/windwalker-renderer">Windwalker Renderer</a> to render page, 
this package provides a simple interface similar to Twig that support template extending.</p>

<h2>Include Sub Template</h2>

<p>Use <code>load()</code> to load other template file as a block. The first argument is file path, the second argument is new data
to merge with original data.</p>

<pre><code class="php">echo $this-&gt;load('sub.template', array('bar' =&gt; 'baz'));
</code></pre>

<p>Example to load <code>foo/article.php</code>:</p>

<pre><code class="html">&lt;?php
// foo/article.php

/** @var  $data  \Windwalker\Data\Data  */
$title = $data['title'];
?&gt;
&lt;h1&gt;&lt;?php echo $this-&gt;escape($title); ?&gt;&lt;/h1&gt;

&lt;?php foreach ($data-&gt;articles as $article): ?&gt;
    &lt;?php echo $this-&gt;load('foo.article', array('bar' =&gt; 'baz')); ?&gt;
&lt;?php endforeach; ?&gt;
</code></pre>

<h2>Extends Parent Template</h2>

<p>In Windwalker Renderer, there is a powerful function like Twig or Blade, we provide <code>extend()</code> method to extends
parent template. (<code>extends</code> in php is a reserved string, so we can only use <code>extend</code>)</p>

<p>For example, this is the parent <code>_global/html.php</code> template:</p>

<pre><code class="html">&lt;!-- _global/html.php --&gt;
&lt;Doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;?php $this-&gt;block('title');?&gt;Home&lt;?php $this-&gt;endblock(); ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
    &lt;?php $this-&gt;block('body');?&gt;
        &lt;h2&gt;Home page&lt;/h2&gt;
    &lt;?php $this-&gt;endblock(); ?&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>And we can extends it in our View:</p>

<pre><code class="html">&lt;?php
// foo/article.php
$this-&gt;extend('_global.html');
?&gt;

&lt;?php $this-&gt;block('title');?&gt;Article&lt;?php $this-&gt;endblock(); ?&gt;

&lt;?php $this-&gt;block('body');?&gt;
    &lt;article&gt;
        &lt;h2&gt;Article&lt;/h2&gt;
        &lt;p&gt;FOO&lt;/p&gt;
    &lt;/article&gt;
&lt;?php $this-&gt;endblock(); ?&gt;
</code></pre>

<p>The result will be:</p>

<pre><code class="html">&lt;Doctype html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Article&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;article&gt;
            &lt;h2&gt;Article&lt;/h2&gt;
            &lt;p&gt;FOO&lt;/p&gt;
        &lt;/article&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2>Show Parent</h2>

<p>We can echo parent data in a block:</p>

<pre><code class="html">&lt;?php $this-&gt;block('body');?&gt;
    &lt;?php echo $this-&gt;parent(); ?&gt;
    &lt;article&gt;
        &lt;h2&gt;Article&lt;/h2&gt;
        &lt;p&gt;FOO&lt;/p&gt;
    &lt;/article&gt;
&lt;?php $this-&gt;endblock(); ?&gt;
</code></pre>

<p>Result:</p>

<pre><code class="html">&lt;h2&gt;Home page&lt;/h2&gt;
&lt;article&gt;
    &lt;h2&gt;Article&lt;/h2&gt;
    &lt;p&gt;FOO&lt;/p&gt;
&lt;/article&gt;
</code></pre>

<p>See: <a href="https://github.com/ventoviro/windwalker-renderer#windwalker-renderer">Windwalker Renderer</a></p>

<h1>Blade Engine</h1>

<p>Blade is a simple, yet powerful templating engine provided with <a href="http://laravel.com/">Laravel</a>. It is driven by template inheritance and sections. 
All Blade templates should use the <code>.blade.php</code> extension.</p>

<p>There are 2 ways to use Blade engine in View, first is directly create it.</p>

<pre><code class="php">use Windwalker\Core\View\BladeHtmlView;

// Use Blade view
$view = new BladeHtmlView;

$view['foo'] = $bar;

echo $view-&gt;setLayout('flower.sakura')-&gt;render();
</code></pre>

<p>The second is extend it.</p>

<pre><code class="php">use Windwalker\Core\View\BladeHtmlView;

class MyBladeHtmlView extends BladeHtmlView
{

}

$view = new MyBladeHtmlView;

echo $view-&gt;setLayout('flower.sakura')-&gt;render();
</code></pre>

<h2>Get Data in Blade Engine</h2>

<p>In Blade template we don't need to use <code>$data</code>, all properties are at top level:</p>

<pre><code class="php">{{{ $item-&gt;title }}}

{{ $uri['base.path'] }}
</code></pre>

<h2>How to Use Blade Engine</h2>

<p>See: <a href="http://laravel.com/docs/4.2/templates">Blade Templating</a></p>

<h1>Twig Engine</h1>

<p>Twig is a well-known template language for PHP, created by Sensio. It uses a syntax similar to the Django and Jinja template languages.</p>

<p>There are 2 ways to use Twig engine, similar to Blade engine:</p>

<pre><code class="php">use Windwalker\Core\View\TwigHtmlView;

$view = new TwigHtmlView;
</code></pre>

<p>OR</p>

<pre><code class="php">use Windwalker\Core\View\TwigHtmlView;

class MyTwigHtmlView extends TwigHtmlView
{

}

$view = new MyTwigHtmlView;
</code></pre>

<h2>How to Use Twig</h2>

<p>See: <a href="http://twig.sensiolabs.org/documentation">Twig Documentation</a></p>

                        <hr />

    <p class="uk-text-center">
        Found a typo? Help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/mvc/view-templating.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </div>
    </div>

    <footer id="footer">
        <div class="uk-container uk-container-center uk-text-center">

            <div class="footer-logo">
                <a href="#" data-uk-smooth-scroll>
                    <img src="../../media/images/logo/windwalker-logo.png" width="150" alt="Footer LOGO">
                </a>
            </div>

            <p class="uk-text-center social-buttons">
                <a target="_blank" class="uk-icon-button uk-icon-facebook" href="javascript: void(0);"></a>

                <a target="_blank" class="uk-icon-button uk-icon-github" href="https://github.com/ventoviro/windwalker"></a>

                <a class="uk-icon-button uk-icon-envelope-o" href="mailto:asika32764@gmail.com"></a>
            </p>

            <p>
                Copyright &copy; 2016 Windwalker. All Rights Reserved.
            </p>
            <p class="back">
                <a href="#" data-uk-smooth-scroll><span class="uk-icon-chevron-up"></span> Back to Top</a>
            </p>
        </div>
    </footer>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48372917-6', 'auto');
        ga('send', 'pageview');

    </script>

    </body>
</html>
