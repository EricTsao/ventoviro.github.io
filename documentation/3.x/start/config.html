<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="../../../media/images/favicon.ico" />

        <title>Config &amp; Setting | Windwalker - A Modern PHP Framework</title>

        <!-- Uikit core CSS -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/rainbow.min.css"/>

        <!-- Custom styles for this template -->
        <link href="../../../media/css/main.css" rel="stylesheet">

        <meta name="description" content="">
        <meta name="generator" content="The Time Machine">

        <meta property="og:title" content="Config &amp; Setting | Windwalker - A Modern PHP Framework">
        <meta property="og:site_name" content="Windwalker Framework">

            

    <style>
        #header {
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 500;
            border-bottom: 1px solid #eee;
        }

        body {
            padding-top: 70px;
        }
    </style>

        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="../../../media/js/jquery.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
        <script src="../../../media/js/highlight/highlight.yaml.js"></script>
        <script>
            $(document).ready(function() {

                $('.article-content pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            });
        </script>

            <script src="../../../media/js/doc.js"></script>
    </head>
    <body class="">
    <nav id="header" class="uk-navbar uk-navbar-attached">
        <div class="uk-container uk-container-center">

            <a id="big-logo" class="uk-navbar-brand uk-hidden-small" href="../../../">
                <img class="uk-margin uk-margin-remove" src="../../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <a href="#" class="uk-navbar-toggle uk-visible-small" data-uk-toggle="{target:'#mainmenu', cls: 'uk-hidden-small'}"></a>

            <a id="small-logo" class="uk-navbar-brand uk-navbar-center uk-visible-small" href="../../../">
                <img class="uk-margin uk-margin-remove" style="max-width: 95%;" src="../../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

                <div id="version-switcher" class="uk-button-dropdown uk-float-right" data-uk-dropdown="">
        <a class="uk-button uk-button-primary" href="../../../documentation/3.x/start/getting-started.html">
            3.x <i class="uk-icon-caret-down"></i>
        </a>

        <div class="uk-dropdown">
            <ul class="uk-nav uk-nav-dropdown">
                <li class="uk-active">
                    <a href="../../../documentation/3.x/start/config.html">3.x</a>
                </li>

                <li class="">
                    <a href="../../../documentation/2.1/start/config.html">2.1</a>
                </li>
            </ul>
        </div>
    </div>

            <ul id="mainmenu" class="uk-navbar-nav uk-float-right uk-hidden-small">
                <li class="">
                    <a href="../../../about/">
                        <span class="menu-item-title">About</span>
                    </a>
                </li>

                <li class="uk-active">
                    <a href="../../../documentation/3.x/start/getting-started.html">
                        <span class="menu-item-title">Documentation</span>
                    </a>
                </li>

                <li class="">
                    <a href="https://github.com/ventoviro/windwalker" target="_blank">
                        <span class="menu-item-title">GitHub</span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>

    <section id="banner">
        <div class="banner-inner">
                <div class="uk-container uk-container-center banner-inner-title">
        <h1>Config &amp; Setting</h1>
    </div>
        </div>
    </section>

    <div id="main-body">
            <div class="uk-container uk-container-center">
        <div class="uk-grid">
                <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="uk-nav uk-nav-side side-menu side-bar" data-uk-nav="">
    
                
    </ul>    </div>

            <div class="uk-width-medium-3-4 uk-container-center">
                <article class="article-content">
                    <h1>How to Configure Your Application</h1>

<p>Windwalker stores config files in <code>/etc</code> folder, you can see <code>config.yml</code> and <code>secret.yml</code> file. These two config files will be merged
in runtime, so settings in secret.yml can override the same key in config.yml.</p>

<h2>config.yml</h2>

<p>The <code>config.yml</code> stores some global system settings includes the language locale, session time, cache storage, timezone etc. 
Which is your application need and will be track by VCS, .</p>

<h2>secret.yml</h2>

<p>And the <code>secret.yml</code> stores some customize or sensitive settings which you don't want to track by VCS, for example, the database account
or the 3rd party service API key, you will not hope to push these information to GitHub or other public VCS service, so we will
write some keys in <code>secret.dist.yml</code>.</p>

<p>For example, we can prepare some empty keys in <code>secret.dist.yml</code> then push this file to VCS.</p>

<pre><code class="yaml"># secret.dist.yml

# Keep NULL to notice developers fill this data. 
amazon:
    key: ~
    secret: ~
</code></pre>

<p>When Someone clone this project, they must copy <code>secret.dist.yml</code> to <code>secret.yml</code> and fill the keys.</p>

<pre><code class="yaml"># secret.yml

# Fill real data to use.
amazon:
    key: ************
    secret: *************************
</code></pre>

<h2>Override config.yml</h2>

<p>If you set a config in config.yml</p>

<pre><code class="yaml"># config.yml

foo: bar
</code></pre>

<p>You can override it in secret.yml</p>

<pre><code class="yaml"># secret.yml

foo: yoo
</code></pre>

<p>Now the <code>foo</code> value will be <code>yoo</code> not <code>bar</code>.</p>

<h1>Get &amp; Set Config Data</h1>

<p>In Application, you can use <code>get()</code> to get config.</p>

<pre><code class="php">// Use Ioc get Application then get config
$value = Ioc::getApplication()-&gt;get('foo', [default value]);
</code></pre>

<pre><code class="php">// Get config in controller
$value = $this-&gt;app-&gt;get('foo', [default value]);

// Set data
$this-&gt;app-&gt;set('foo', 'baz');
</code></pre>

<p>Get config by Config object.</p>

<pre><code class="php">// In everywhere
$config = Ioc::getConfig();

$foo = $config-&gt;get('foo');

// You can also get data by array access.

$foo = $config['foo'];
</code></pre>

<p>Config is a Registry object, please see <a href="../more/registry.html">Registry Object</a></p>

<h2>Nested Data</h2>

<p>If you have multi-level config:</p>

<pre><code class="yaml">morning:
    break:
        first: egg
</code></pre>

<p>Please use dot (<code>.</code>) as separator:</p>

<pre><code class="php">$config-&gt;get('morning.break.first'); // sakura

// OR

$config['morning.break.first']; // sakura
</code></pre>

<h1>Add New Config Files</h1>

<p>Open <code>src/Windwalker/Web/Application.php</code> and modify <code>loadConfiguration()</code>, you can load any files as config if you want.</p>

<pre><code class="php">protected function loadConfiguration(Registry $config)
{
    Windwalker::loadConfiguration($config);

    $config-&gt;loadFile(WINDWALKER_ETC . '/my-config.yml', 'yaml');

    // Or load other formats
    $config-&gt;loadFile(WINDWALKER_ETC . '/my-config.ini', 'ini');

    $config-&gt;loadFile(WINDWALKER_ETC . '/my-config.xml', 'xml');

    $config-&gt;loadFile(WINDWALKER_ETC . '/my-config.php', 'php'); // Must return array
}
</code></pre>

<h1>Package Config</h1>

<p>Every packages has their own configs. If you have a <code>FlowerPackage</code> and it's alias is <code>flower</code>, create a file to <code>etc/package/flower.yaml</code>.
Package object will auto load this config file.</p>

<p>You can get package config from package object:</p>

<pre><code class="php">$package = PackageHelper::getPackage('flower');

$package-&gt;get('foo');
</code></pre>

<h1>Description of Config</h1>

<p>The config.yml looks like above:</p>

<pre><code class="yaml">system:
    debug: 0
    error_reporting: 0
    timezone: 'UTC'
    secret: 'This-token-is-not-safe'
session:
    handler: native
    expire_time: 15
routing:
    debug: 0
cache:
    enabled: 0
    storage: file
    handler: serialize
    dir: cache
    time: 15
language:
    debug: 0
    locale: en-GB
    default: en-GB
    format: ini
    path: resources/languages
</code></pre>

<table>
<thead>
<tr>
  <th>Key</th>
  <th>Sub Key</th>
  <th>Value</th>
</tr>
</thead>
<tbody>
<tr>
  <td><code>system</code></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td><code>debug</code></td>
  <td>Enable debug mode or not</td>
</tr>
<tr>
  <td></td>
  <td><code>error_reporting</code></td>
  <td>PHP error_reporting setting, set -1 to enable strict mode, set 0 to close all error messages.</td>
</tr>
<tr>
  <td></td>
  <td><code>timezone</code></td>
  <td>The default system timezone.</td>
</tr>
<tr>
  <td></td>
  <td><code>secret</code></td>
  <td>A random string as secret code to generate some tokens</td>
</tr>
<tr>
  <td><code>session</code></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td><code>handler</code></td>
  <td>The session handler, <code>native</code> is the native php session handler, you can use <code>database</code> or <code>memcache</code>, please see <a href="https://github.com/ventoviro/windwalker/tree/master/src/Session#windwalker-session">Windwalker Session</a></td>
</tr>
<tr>
  <td></td>
  <td><code>expire_time</code></td>
  <td>Session expire time, the unit is minute.</td>
</tr>
<tr>
  <td><code>routing</code></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td><code>debug</code></td>
  <td>Enable routing debug, see <a href="./documentation/mvc/uri-route-building.html">Routing</a></td>
</tr>
<tr>
  <td><code>cache</code></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td><code>enabled</code></td>
  <td>Enable system cache.</td>
</tr>
<tr>
  <td></td>
  <td><code>storage</code></td>
  <td>Cache storage, FileStorage is the default. See <a href="./documentation/more/caching.html">Caching</a></td>
</tr>
<tr>
  <td></td>
  <td><code>handler</code></td>
  <td>Hot cache convert array and object to string.</td>
</tr>
<tr>
  <td></td>
  <td><code>dir</code></td>
  <td>Cache storage folder.</td>
</tr>
<tr>
  <td></td>
  <td><code>time</code></td>
  <td>Cache TTL time (minute).</td>
</tr>
<tr>
  <td><code>language</code></td>
  <td></td>
  <td></td>
</tr>
<tr>
  <td></td>
  <td><code>debug</code></td>
  <td>Enable Language debug.</td>
</tr>
<tr>
  <td></td>
  <td><code>locale</code></td>
  <td>The current locale.</td>
</tr>
<tr>
  <td></td>
  <td><code>default</code></td>
  <td>The default locale.</td>
</tr>
<tr>
  <td></td>
  <td><code>format</code></td>
  <td>The language translate file format. See <a href="https://github.com/ventoviro/windwalker/tree/master/src/Language">Windwalker Language</a></td>
</tr>
<tr>
  <td></td>
  <td><code>path</code></td>
  <td>The language file path.</td>
</tr>
</tbody>
</table>

                        <hr />

    <p class="uk-text-center">
        Help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/3.x/start/config.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </div>
    </div>

    <footer id="footer">
        <div class="uk-container uk-container-center uk-text-center">

            <div class="footer-logo">
                <a href="#" data-uk-smooth-scroll>
                    <img src="../../../media/images/logo/windwalker-logo.png" width="150" alt="Footer LOGO">
                </a>
            </div>

            <p class="uk-text-center social-buttons">
                <a target="_blank" class="uk-icon-button uk-icon-facebook" href="javascript: void(0);"></a>

                <a target="_blank" class="uk-icon-button uk-icon-github" href="https://github.com/ventoviro/windwalker"></a>

                <a class="uk-icon-button uk-icon-envelope-o" href="mailto:asika32764@gmail.com"></a>
            </p>

            <p>
                Copyright &copy; 2016 Windwalker. All Rights Reserved.
            </p>
            <p class="back">
                <a href="#" data-uk-smooth-scroll><span class="uk-icon-chevron-up"></span> Back to Top</a>
            </p>
        </div>
    </footer>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48372917-6', 'auto');
        ga('send', 'pageview');

    </script>

    </body>
</html>
