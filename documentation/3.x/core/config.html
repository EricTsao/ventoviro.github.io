<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="../../../media/images/favicon.ico" />

        <title>Config &amp; Setting | Windwalker - A Modern PHP Framework</title>

        <!-- Uikit core CSS -->
        <link href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/css/uikit.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/rainbow.min.css"/>

        <!-- Custom styles for this template -->
        <link href="../../../media/css/main.css" rel="stylesheet">

        <meta name="description" content="">
        <meta name="generator" content="The Time Machine">

        <meta property="og:title" content="Config &amp; Setting | Windwalker - A Modern PHP Framework">
        <meta property="og:site_name" content="Windwalker Framework">

            

    <style>
        #header {
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 500;
            border-bottom: 1px solid #eee;
        }

        body {
            padding-top: 70px;
        }
    </style>

        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="../../../media/js/jquery.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.15.0/js/uikit.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
        <script src="../../../media/js/highlight/highlight.yaml.js"></script>
        <script src="../../../media/js/highlight/highlight.blade.js"></script>
        <script>
            $(document).ready(function() {

                $('.article-content pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });
            });
        </script>

            <script src="../../../media/js/doc.js"></script>
    </head>
    <body class="">
    <nav id="header" class="uk-navbar uk-navbar-attached">
        <div class="uk-container uk-container-center">

            <a id="big-logo" class="uk-navbar-brand uk-hidden-small" href="../../../">
                <img class="uk-margin uk-margin-remove" src="../../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

            <a href="#" class="uk-navbar-toggle uk-visible-small" data-uk-toggle="{target:'#mainmenu', cls: 'uk-hidden-small'}"></a>

            <a id="small-logo" class="uk-navbar-brand uk-navbar-center uk-visible-small" href="../../../">
                <img class="uk-margin uk-margin-remove" style="max-width: 95%;" src="../../../media/images/logo/windwalker-logo.png" title="Asukademy" alt="Asukademy">
            </a>

                <div id="version-switcher" class="uk-button-dropdown uk-float-right" data-uk-dropdown="">
        <a class="uk-button uk-button-primary" href="../../../documentation/3.x/start/getting-started.html">
            3.x <i class="uk-icon-caret-down"></i>
        </a>

        <div class="uk-dropdown">
            <ul class="uk-nav uk-nav-dropdown">
                <li class="uk-active">
                    <a href="../../../documentation/3.x/core/config.html">3.x</a>
                </li>

                <li class="">
                    <a href="../../../documentation/2.1/core/config.html">2.1</a>
                </li>
            </ul>
        </div>
    </div>

            <ul id="mainmenu" class="uk-navbar-nav uk-float-right uk-hidden-small">
                <li class="">
                    <a href="../../../about/">
                        <span class="menu-item-title">About</span>
                    </a>
                </li>

                <li class="uk-active">
                    <a href="../../../documentation/3.x/start/getting-started.html">
                        <span class="menu-item-title">Documentation</span>
                    </a>
                </li>

                <li class="">
                    <a href="https://github.com/ventoviro/windwalker" target="_blank">
                        <span class="menu-item-title">GitHub</span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>

    <section id="banner">
        <div class="banner-inner">
                <div class="uk-container uk-container-center banner-inner-title">
        <h1>Config &amp; Setting</h1>
    </div>
        </div>
    </section>

    <div id="main-body">
            <div class="uk-container uk-container-center">
        <div class="uk-grid">
                <div class="uk-width-medium-1-4 uk-container-center">
        <ul class="uk-nav uk-nav-side side-menu side-bar" data-uk-nav="">
    
                
        <li class="uk-nav-header">Start</li>
                    <li class="">
                <a href="../../../documentation/3.x/start/installation.html">Installation</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/start/getting-started.html">Getting Started</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Core</li>
                    <li class="">
                <a href="../../../documentation/3.x/core/routing.html">Routing</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/core/package-system.html">Packages</a>
            </li>
                    <li class="uk-active">
                <a href="../../../documentation/3.x/core/config.html">Config &amp; Setting</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/core/request-input.html">Request and Input</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/core/ioc-container.html">IoC Container</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/core/service-provider.html">Service Provider</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">MVC</li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/use-controller.html">Use Controller</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/class-resolvers.html">Class Resolvers</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/view-templating.html">View and Templating</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/edge.html">Edge Templates</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/model-database.html">Model and Database</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/view-model.html">ViewModel</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/mvc/uri-route-building.html">URI and Route Building</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Database</li>
                    <li class="">
                <a href="../../../documentation/3.x/db/basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/db/read-write.html">Read and Write</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/db/table-schema.html">Table and Schema</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/db/query-builder.html">Query Builder</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/db/active-record.html">ActiveRecord</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/db/datamapper.html">DataMapper</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/db/migration.html">Migration And Seeding</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">Console</li>
                    <li class="">
                <a href="../../../documentation/3.x/console/console-basic.html">Basic Usage</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/console/custom-commands.html">Custom Commands</a>
            </li>
        
    <li class="uk-nav-divider"></li>
       <li class="uk-nav-header">More</li>
                    <li class="">
                <a href="../../../documentation/3.x/more/authentication.html">Authentication</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/caching.html">Caching</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/events.html">Events</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/data-object.html">Data Object</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/registry.html">Registry Object</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/widget-renderer.html">Widget and Renderer</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/form-builder.html">Form Builder</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/form-definition.html">Form Definition</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/html-builder.html">HTML Builder</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/languages.html">Languages</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/pagination.html">Pagination</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/session.html">Session</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/datetime.html">DateTime</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/tests.html">Tests</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/validation.html">Validation</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/debugging.html">Debugging and Logging</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/error-handling.html">Error Handling</a>
            </li>
                    <li class="">
                <a href="../../../documentation/3.x/more/more-packages.html">More Packages</a>
            </li>
        
    <li class="uk-nav-divider"></li>
   </ul>    </div>

            <div class="uk-width-medium-3-4 uk-container-center">
                <article class="article-content">
                    <h2>Global Config</h2>

<p>Windwalker stores global config files in <code>/etc</code> folder, you can see <code>config.yml</code> and <code>secret.yml</code> file. These two config files will be merged
in runtime, so settings in <code>secret.yml</code> will override the same key in <code>config.yml</code>.</p>

<h3>config.yml</h3>

<p>The <code>config.yml</code> stores some global system settings includes the language locale, session time, cache storage, timezone etc. 
Which is your application need and will be track by VCS, .</p>

<h3>secret.yml</h3>

<p>And the <code>secret.yml</code> stores some customize or sensitive settings which you don't want to track by VCS, for example, the database account
or the 3rd party service API key, you will not hope to push these information to GitHub or other public VCS service, so we will
write some keys in <code>secret.dist.yml</code>.</p>

<p>For example, we can prepare some empty keys in <code>secret.dist.yml</code> then push this file to VCS.</p>

<pre><code class="yaml">## secret.dist.yml

## Keep NULL to notice developers fill this data.
amazon:
    key: ~
    secret: ~
</code></pre>

<p>When Someone clone this project, they must copy <code>secret.dist.yml</code> to <code>secret.yml</code> and fill the keys.</p>

<pre><code class="yaml">## secret.yml

## Fill real data to use.
amazon:
    key: ************
    secret: *************************
</code></pre>

<h3>Override config.yml</h3>

<p>If you set a config in config.yml</p>

<pre><code class="yaml">## config.yml

foo: bar
</code></pre>

<p>You can override it in secret.yml</p>

<pre><code class="yaml">## secret.yml

foo: yoo
</code></pre>

<p>Now the <code>foo</code> value will be <code>yoo</code> not <code>bar</code>.</p>

<h2>Environment Config</h2>

<p>Environment configs stored ad <code>etc/app/</code>:</p>

<ul>
<li><code>web.php</code> => Config file for Web</li>
<li><code>dev.php</code> => Config file for Web development mode</li>
<li><code>console.php</code> => Config file for CLI</li>
<li><code>test.php</code> => Config file for test</li>
<li><code>windwalker.php</code> => Config file for all</li>
</ul>

<p>Environment config contains some important system settings, you can add providers, listeners and middlewares to
customize your system process.</p>

<h2>Get &amp; Set Config Data</h2>

<p>In Application, you can use <code>get()</code> to get config.</p>

<pre><code class="php">// Use Ioc get Application then get config
$value = Ioc::getApplication()-&gt;get('foo', [default value]);
</code></pre>

<pre><code class="php">// Get config in controller
$value = $this-&gt;app-&gt;get('foo', [default value]);

// Set data
$this-&gt;app-&gt;set('foo', 'baz');
</code></pre>

<p>Get config by Config object.</p>

<pre><code class="php">// In everywhere
$config = Ioc::getConfig();

$foo = $config-&gt;get('foo');

// You can also get data by array access.

$foo = $config['foo'];
</code></pre>

<p>Config is a Structure object, please see <a href="../more/structure.html">Structure Object</a></p>

<h3>Nested Data</h3>

<p>If you have multi-level config:</p>

<pre><code class="yaml">morning:
    break:
        first: egg
</code></pre>

<p>Please use dot (<code>.</code>) as separator:</p>

<pre><code class="php">$config-&gt;get('morning.break.first'); // sakura

// OR get data by array access

$config['morning.break.first']; // sakura
</code></pre>

<h2>Add New Config Files</h2>

<p>Open <code>src/app/windwalker.php</code> (or <code>web.php</code>, <code>console.php</code>), add new config file at <code>configs</code> element. Windwalker supports <code>php</code>, <code>json</code> and <code>yaml</code> format
to save config.</p>

<pre><code class="php">// ...
    'configs' =&gt; [
        500 =&gt; WINDWALKER_ETC . '/my-config.yml'
    ],
// ...
</code></pre>

<p>We use numeric keys to support sorting of config files, the bigger is later loaded, so last config will override previous.</p>

<h2>Package Config</h2>

<p>Every packages has their own configs. If you have a <code>FlowerPackage</code> and it's alias is <code>flower</code>, create a file to <code>etc/package/flower.php</code>.
The Package object will auto load this config file.</p>

<pre><code class="php">&lt;?php
// etc/package/flower.php

return [
    'foo' =&gt; 'bar'
];
</code></pre>

<p>You can get package config from package object:</p>

<pre><code class="php">$package = PackageHelper::getPackage('flower');

$package-&gt;get('foo'); // bar
</code></pre>

<h2>Description of <code>config.yaml</code></h2>

<pre><code class="yaml">system:
    # Enanle debug mode, will disable cache, and log some errors.
    debug: false

    # The PHP error reporting level, 0 is hide all errors, -1 is the biggest report level.
    error_reporting: 0

    # Default system timezone.
    timezone: 'UTC'

    # Secret code will be a salt to generate hashs when system running,
    # Will be replace when Windwalker installation.
    secret: 'This-token-is-not-safe'

error:
    # The error template &amp; renderer engine
    template: windwalker.error.default
    engine: php

session:
    # Session handler, supports `native`, `database`, `apc`, `memcached`
    handler: native
    # By minutes
    expire_time: 15

routing:
    # Enable routing debug, if route key not found when you generate routs,
    # will raise error and stop application.
    debug: 1

    # Simple routing help us auto find controller by URL: `{package}/{controller}` without routing config,
    # Disable this function will enhance performance.
    simple_route: 0

cache:
    # Disabled cache will make all cache as null storage and not stored to storage.
    # But you can use CacheFactory::createCache('mycache') to ignore this settings.
    enabled: false

    # The default sotrage, you can use other storages by use `CacheManager::getCache('name', 'storage')`
    # Support storages: file / raw_file / memcached / null / redis / array / runtime_array
    storage: file

    # Cache serializer decided how to serialize and store data into storage.
    # Support serializers: php / json / string / raw
    serializer: php

    # Cache time (minutes)
    time: 15

language:
    # Language debug will mark untranslated string by `??` and stored orphan in Languages object.
    debug: false

    # The current locale
    locale: en-GB

    # The default locale, if translated string in current locale not found, will fallback to default locale.
    default: en-GB

    # Dfault languaghe file format, you can use other foramt in runtime by `Translator::loadFile($file, 'yaml')`
    format: ini

console:
    # Custom script, add some commends here to batch execute. Example:
    # script:
    #     foo:
    #         - git pull
    #         - composer install
    #         - php windwalker migration migrate
    #
    # Then just run `$ php windwalker run foo`
    script: ~
</code></pre>

                        <hr />

    <p class="uk-text-center">
        Help us <a target="_blank" href="https://github.com/ventoviro/ventoviro.github.io/tree/master/.vaseman/entries/documentation/3.x/core/config.md">improve</a> this document.
    </p>
                </article>
            </div>
        </div>
    </div>
    </div>

    <footer id="footer">
        <div class="uk-container uk-container-center uk-text-center">

            <div class="footer-logo">
                <a href="#" data-uk-smooth-scroll>
                    <img src="../../../media/images/logo/windwalker-logo.png" width="150" alt="Footer LOGO">
                </a>
            </div>

            <p class="uk-text-center social-buttons">
                <a target="_blank" class="uk-icon-button uk-icon-facebook" href="javascript: void(0);"></a>

                <a target="_blank" class="uk-icon-button uk-icon-github" href="https://github.com/ventoviro/windwalker"></a>

                <a class="uk-icon-button uk-icon-envelope-o" href="mailto:asika32764@gmail.com"></a>
            </p>

            <p>
                Copyright &copy; 2016 Windwalker. All Rights Reserved.
            </p>
            <p class="back">
                <a href="#" data-uk-smooth-scroll><span class="uk-icon-chevron-up"></span> Back to Top</a>
            </p>
        </div>
    </footer>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-48372917-6', 'auto');
        ga('send', 'pageview');

    </script>

    </body>
</html>
